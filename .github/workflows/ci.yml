name: CI
permissions:
  contents: read

on:
    branches:
      - main
      - 'release/**'
    paths:
      - 'custom_components/**'
      - 'tests_enphase_ev/**'
      - 'scripts/validate_quality_scale.py'
      - 'pyproject.toml'
      - '.ruff.toml'
      - '.github/workflows/tests.yml'
      - '.github/workflows/ci.yml'

concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true

jobs:
  checks:
    uses: ./.github/workflows/tests.yml
    secrets: inherit
