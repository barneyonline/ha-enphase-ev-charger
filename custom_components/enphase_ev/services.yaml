
start_charging:
  name: Start Charging
  description: Start charging on the Enphase Energy charger
  target:
    entity:
      integration: enphase_ev
      domain: button
  fields:
    advanced:
      collapsed: true
      fields:
        charging_level:
          required: false
          selector:
            number:
              min: 6
              max: 40
              step: 1
        connector_id:
          required: false
          selector:
            number:
              min: 1
              max: 2
              step: 1

stop_charging:
  name: Stop Charging
  description: Stop charging on the Enphase Energy charger
  target:
    entity:
      integration: enphase_ev
      domain: button

trigger_message:
  name: Trigger OCPP Message
  target:
    entity:
      integration: enphase_ev
      domain: button
  fields:
    requested_message:
      required: true
      selector:
        text:
          multiline: false
      example: MeterValues
    advanced:
      collapsed: true
      fields:
        site_id:
          required: false
          selector:
            text:
              multiline: false
          example: "1234567"

clear_reauth_issue:
  name: Clear Reauth Issue
  description: Manually clear the integration's reauthentication issue notification
  target:
    entity:
      integration: enphase_ev
      domain: sensor
  fields:
    device_id:
      required: false
      selector:
        device:
          integration: enphase_ev
          multiple: true
    site_id:
      required: false
      selector:
        text:
          multiline: false
      example: "1234567"

start_live_stream:
  name: Start Live Stream
  description: Request faster cloud status updates for a short period
  target:
    entity:
      integration: enphase_ev
  fields:
    advanced:
      collapsed: true
      fields:
        site_id:
          required: false
          selector:
            text:
              multiline: false
          example: "1234567"

stop_live_stream:
  name: Stop Live Stream
  description: Stop the cloud live stream request
  target:
    entity:
      integration: enphase_ev
  fields:
    advanced:
      collapsed: true
      fields:
        site_id:
          required: false
          selector:
            text:
              multiline: false
          example: "1234567"

sync_schedules:
  name: Sync Schedules
  description: Refresh Enphase schedules and update schedule helpers
  fields:
    device_id:
      required: false
      selector:
        device:
          integration: enphase_ev
          multiple: true

request_grid_toggle_otp:
  name: Request Grid Toggle OTP
  description: Send a one-time code required for changing site grid mode.
  target:
    entity:
      integration: enphase_ev
  fields:
    advanced:
      collapsed: true
      fields:
        site_id:
          required: false
          selector:
            text:
              multiline: false
          example: "1234567"

set_grid_mode:
  name: Set Grid Mode
  description: Change site grid mode using a one-time code.
  target:
    entity:
      integration: enphase_ev
  fields:
    mode:
      required: true
      selector:
        select:
          options:
            - on_grid
            - off_grid
    otp:
      required: true
      selector:
        text:
          multiline: false
    advanced:
      collapsed: true
      fields:
        site_id:
          required: false
          selector:
            text:
              multiline: false
          example: "1234567"
